version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci
        - echo "Installing minimal Python dependencies..."
        - python3 -m pip install --upgrade pip --no-cache-dir
        # Install CPU-only version of PyTorch (lightweight) without cache to save space
        - python3 -m pip install torch --index-url https://download.pytorch.org/whl/cpu --no-cache-dir
        - python3 -m pip install pandas numpy scikit-learn --no-cache-dir
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: .next
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
